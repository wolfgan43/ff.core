<script type="text/javascript">
	jQuery.fn.replaceAttr = function(aName, rxString, repString)
	{
		return this.attr(
							aName,
							function() 
							{ 
								return jQuery(this).attr(aName).replace(rxString, repString); 
							}
						);
	}; 

	$(function()
	{
		$("#{component}avaiable, #{component}selected").sortable({
			  connectWith: 	["#{component}avaiable, #{component}selected"]
			, items: 		"li:not(.not-draggable)"
			, stop:		function (ev, ui)
							{
								
							}
			, receive: 		function (ev, ui)
							{
								var inputs = $(ui.item).children("input");
								if (inputs.length)
								{
									if (ev.target.id == "{component}selected")
									{
										inputs.replaceAttr("id", /^{component}recordset_avl(.*)/, "{component}recordset$1");
										inputs.replaceAttr("name", /^{component}recordset_avl(.*)/, "{component}recordset$1");
									}
									else
									{
										inputs.replaceAttr("id", /^{component}recordset(.*)/, "{component}recordset_avl$1");
										inputs.replaceAttr("name", /^{component}recordset(.*)/, "{component}recordset_avl$1");
									}
								}
							}
		});
	});
</script>

<div id="{component}hidden" class="hidden">
	<input type="hidden" id="{component}rows" name="{component}rows" value="{rows}" />
	<input type="hidden" id="{component}delete_row" name="{component}delete_row" value="" />
	<!--BeginSectHidden-->
	<input type="hidden" name="{component}{hidden_name}" value="{hidden_value}" /><!--EndSectHidden-->
</div>

<h3>{title}</h3>

<!--BeginSectError-->
<div class="warning">{strError}</div>
<!--EndSectError-->

<ul id="{component}avaiable" class="sortable">
	<li class="not-draggable">
		Avaiable Elements
	</li>
	<!--BeginSectAvaiableRow-->
	<li class="draggable">
	    <!--BeginSectFormField-->
			<!--BeginSectFieldHidden-->
			<input type="hidden" name="{component}{hidden_name}" value="{hidden_value}" /><!--EndSectFieldHidden-->
	    {label} {control}
	    <!--EndSectFormField-->
	</li>
	<!--EndSectAvaiableRow-->
</ul>
<ul id="{component}selected" class="sortable">
	<li class="not-draggable">
		Selected Elements
	</li>
	<!--BeginSectSelectedRow-->
	<li class="draggable">
	    <!--BeginSectSelFormField-->
			<!--BeginSectSelFieldHidden-->
			<input type="hidden" name="{component}{hidden_name}" value="{hidden_value}" /><!--EndSectSelFieldHidden-->
    	{label} {control}
	    <!--EndSectSelFormField-->
	</li>
	<!--EndSectSelectedRow-->
</ul>