<?xml version="1.0" encoding="utf-8"?>
<!--
  ~ VGallery: CMS based on FormsFramework
  ~ Copyright (C) 2004-2015 Alessandro Stucchi <wolfgan@gmail.com>
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  ~
  ~  @package VGallery
  ~  @subpackage core
  ~  @author Alessandro Stucchi <wolfgan@gmail.com>
  ~  @copyright Copyright (c) 2004, Alessandro Stucchi
  ~  @license http://opensource.org/licenses/gpl-3.0.html
  ~  @link https://github.com/wolfgan43/vgallery
  -->

<configdata>
    <!-- da agigungere le widgets-->
    <widgets>
        <login>
            <api>
                <login path="/api/auth/login" />
                <logout path="/api/auth/logout" />
                <recover path="/api/auth/recover" />
                <registration path="/api/auth/registration" />
                <activation path="/api/auth/activation" />
            </api>
            <callback>

            </callback>
            <title enable="true" value="_login_title" />
        </login>
    </widgets>
    <request>
        <get name="kid" path="/api/jobs/tools/exec"></get>
    </request>
    <registrations>
        <person>
            <field db="anagraph.name" value="name surname" />
            <field db="anagraph.tel" value="tel" />
            <field db="anagraph.email" value="email" />
            <field db="anagraph_person.name" value="name" />
            <field db="anagraph_person.surname" value="surname" />
        </person>
        <company>
            <field db="anagraph.name" value="name" />
            <field db="anagraph.tel" value="tel" />
            <field db="anagraph.email" value="email" />
            <field db="anagraph_company.name" value="name" />
        </company>
    </registrations>
    <pages>
        <!--
        <page source="^/login"                          engine="auth"           cache="user"    primary="true"  restricted="false"  group="login"       type="mixed" />
        <page source="^/logout"                         engine="auth"           cache="user"    primary="true"  restricted="false"  group="login"       type="mixed" />
        <page source="^/activation"                         engine="auth"           cache="user"    primary="true"  restricted="false"  group="login"       type="mixed" />
        <page source="^/recover"                         engine="auth"           cache="user"    primary="true"  restricted="false"  group="login"       type="mixed" />
        <page source="^/registration"                         engine="auth"           cache="user"    primary="true"  restricted="false"  group="login"       type="mixed" />
        -->
        <page source="^/restricted/users"               engine="console"        cache="user"    primary="true"  restricted="true"   group="login"       type="mixed" />
    </pages>
    <engine>
        <auth           obj="Auth"  method="widget" params="$0"         log="notice.auth"           />
        <auth-admin     obj="Auth"  method="admin" params="$0"         log="notice.auth-admin"           />
    </engine>
    <snippet>
        <session obj="Auth" method="check" />
    </snippet>
</configdata>